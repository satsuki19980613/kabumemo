# ホーム画面 仕様まとめ

## 1. 画面構成と主要機能

-   **タブ構成**: ホーム画面は、全体の話題を追う「トレンド」タブ**と、個人の関心を追う**「フォロー中」タブ**で構成される。 UI/UXと機能について]
-   **「#教えて」機能**: ランキングに入らない価値のある「問い」を可視化するため、`#教えて` が付いたファクターは、トレンドランキングの**最上部に表示**される。 価値のある「問い」が埋もれてしまう]

---

## 2. 「トレンド」タブの詳細仕様

### 2.1. トレンドランキングのロジック

-   **ランキング基準**: 投稿件数だけでなく、**「鮮度スコア」**という独自の基準で順位を決定する。 トレンドの把握]
-   **集計期間**: トレンドの発生基準は、アクティブユーザー数と投稿頻度に応じて**最短24時間〜最長1週間**で動的に変動する。 データの表示と状態管理について]
-   **非表示機能**: ユーザーが特定のハッシュタグを非表示（ミュート）にする機能は、トレンドの全体像を損なう可能性があるため**実装しない**。 UI/UXと機能について]

### 2.2. カード内のインタラクション

-   **ファクタープレビュー**: 各トレンドカード内には、そのハッシュタグに含まれるファクターがランダムに選定され、ユーザーが**手動で横スクロール**することで閲覧できる。自動でのスライドショーは行わない。 「#教えて」機能との連携]
-   **画面遷移**: カード内のファクターテキスト部分をクリックすると、そのファクターを含む**スレッド画面へ直接遷移**する。 話題のファクターのプレビュー]

### 2.3. 右パネル（関連銘柄センチメント）

-   **表示内容**: 選択したハッシュタグに紐づく関連銘柄のセンチメントランキングを、各セクション**上位10位まで**表示する。 UI/UXと機能について]
-   **集計ロジック**:
    1.  ハッシュタグ内の全「トレンド」および「トレンド＋銘柄紐づけ」ファクターをスキャンする。 関連銘柄センチメントのクイック確認]
    2.  各ファクター内で、銘柄ごとに最も優勢なセンチメント（最多投票または最多紐付け）を1つ決定し、その銘柄のカウントを「1」とする。 UI/UXと機能について]
    3.  最多票などが同数で並んだ場合、その銘柄はそのファクターの集計からは除外する。 UI/UXと機能について]
    4.  全ファクターの集計後、センチメントごとの合計カウント数が多い順に銘柄をランキング表示する。 UI/UXと機能について]
-   **操作**: パネル内の銘柄をタップしても画面遷移はせず、**長押し**することで表示されるアクションパネル内の「詳細」ボタンから銘柄詳細画面へ遷移する。 関連銘柄センチメントのクイック確認]

---

## 3. データ表示と状態管理

-   **ローディング**: データ取得中は、コンテンツの骨格を模した**スケルトンスクリーン**を表示する。 データの表示と状態管理について]
-   **データ取得失敗時**: エラー発生時は　**「情報を取得できませんでした。再試行してください」**というメッセージを表示する。 データの表示と状態管理について]
-   **初期表示**: アプリ起動時は、トレンドリストの何も選択されていない状態で表示を開始する。 スレッドへの遷移]
-   **初回投稿時**: システム全体でまだ投稿が一つもない場合、**「あなたが初めての投稿者です！」**という特別なウェルカムメッセージを表示する。 スレッドへの遷移]
-   **データ更新**: ユーザーは**画面を下に引っ張る（Pull-to-Refresh）** ことで、手動で情報を更新できる。 データの表示と状態管理について]

---

## 4. 投稿フロー

-   **ハッシュタグの自動入力**: ホーム画面で特定のハッシュタグを選択した状態でFAB（投稿ボタン）を押すと、そのハッシュタグが**新規投稿モーダルに引き継がれる**。何も選択していない場合は空欄のままとなる。 新規ファクターの投稿]