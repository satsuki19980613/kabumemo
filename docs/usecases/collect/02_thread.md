# スレッド画面 仕様まとめ

## 1. ファクターリストの表示仕様

### 1.1. 表示順序と読み込み

-   **表示順序**: スレッド内のファクターは、常に**新着順**で表示される。これは、全てのファクターを平等に扱うというアプリの方針に基づく。 ファクターの表示と順序]
-   **データ読み込み**: 一つのハッシュタグに多数のファクターが存在する場合を考慮し、**無限スクロール**方式を採用する。ユーザーがリストの末尾までスクロールすると、次のファクターが読み込まれる。 ファクターの表示と順序]

### 1.2. コンテンツのフィルタリング

-   **非表示対象**: ユーザーがブロックしたユーザーの投稿や、退会したユーザーの過去の投稿は、スレッド画面には**完全に表示されない**。 エッジケースと特殊な状態]

### 1.3. コンテキストに応じた表示

-   **「#教えて」からの遷移**: ホーム画面の「#教えて」セクションから遷移した場合、遷移元となった「問い」のファクターが**スレッド画面の最上部に固定表示**される。 「#教えて」機能との連携]

---

## 2. ユーザー操作と投稿ライフサイクル

### 2.1. センチメント投票

-   **ルール**: 「上がる」「下がる」「変わらず」の投票は、**一人一票**のみ可能。
-   **変更・取り消し**: 投票済みのセンチメントボタンを再度タップすることで、**投票を取り消す**ことができる。投票中のボタンは、他と区別できるデザインに変化する。 ユーザー操作とフィードバック]

### 2.2. 投稿の操作

-   **削除**: ユーザーは自身の投稿に限り、カードに常時表示される**「︙」（三点リーダー）メニュー**から**削除**することができる。 UIの分かりやすさ]
-   **編集**: 一度投稿したファクターの内容を**編集することは一切できない**。 投稿のライフサイクルについて]

---

## 3. 右パネル（単一ファクターの関連銘柄）

### 3.1. 表示内容

-   **対象データ**: ホーム画面とは異なり、ユーザーが選択した**単一のファクターに紐づく銘柄のみ**を表示する。
-   **空の状態**: まだ誰も銘柄を紐づけていない場合、パネル内には**「まだ関連銘柄はありません、紐づけたいセクションをタップしてプラスボタンから紐づけてみましょう」**という案内メッセージを表示する。 エッジケースと特殊な状態]

### 3.2. 銘柄の紐付け

-   **操作フロー**: 右パネルの各セクションにある「⊕」ボタンをタップすると、銘柄を検索・選択するための専用モーダルが表示される。
-   **重複の防止**: 既に追加されている銘柄を再度紐づけようとすると、**「すでに紐づけた銘柄です。」**というエラーメッセージを表示し、追加は行われない。 ユーザー操作とフィードバック]

---

## 4. リアルタイム性とコミュニケーション

-   **データ更新の仕様**: 投票数や右パネルの銘柄リストなど、他ユーザーによる変更は**リアルタイムでは反映されない**。ユーザー自身が手動更新（Pull-to-Refreshなど）することで最新の状態が読み込まれる。 リアルタイム性とコミュニケーション]
-   **コメント機能**: 誹謗中傷や否定的コメントのリスクを考慮し、ファクターに対する直接の**テキスト返信（コメント）機能は実装しない**。 リアルタイム性とコミュニケーション]